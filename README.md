# mCat-ac 成就查漏插件

![版本](https://img.shields.io/badge/版本-2.7.9-blue.svg)
![Node.js](https://img.shields.io/badge/Node.js-v16%2B-green.svg)
![YunzaiBot](https://img.shields.io/badge/兼容-YunzaiBot-blue.svg)

## 插件简介

mCat-ac是YunzaiBot的一个成就查漏工具插件，用于帮助原神玩家检查尚未完成的成就，并生成可视化报告。

## 功能特性

- **成就录入**：支持多种方式录入成就数据（分享码、文件导入、椰羊网站链接）
- **成就查漏**：生成未完成成就的可视化报告，支持分类显示
- **个性化主题**：可配置的主题样式，支持自定义背景和显示效果
- **管理员功能**：支持校对文件更新和背景图片设置

## 安装方法

1. 确保已安装YunzaiBot
2. 将本插件放入YunzaiBot的plugins目录下
3. 运行`npm install`安装依赖（仅需axios）
4. 重启YunzaiBot

## 使用说明

- 首次使用插件，请先安装axios，否则无法使用核心功能
- 在插件目录运行以下指令
```bash
pnpm i
```
- 使用  #更新校对文件  命令获取总成就目录
### 用户指令

- **#成就帮助**：显示帮助信息
- **#成就录入**：开始成就录入流程，会提示输入分享码
- **#成就录入[ID/名称]**：直接录入指定ID或名称的成就
- **#成就查漏**：生成成就查漏报告，显示未完成的成就
- **#成就重置**：重置当前用户的成就数据
- **分享椰羊网站链接**：自动导入成就数据（私聊环境下使用）

### 管理员指令

- **#更新校对文件**：更新成就校对文件（自动检查更新）
- **#强制更新校对文件**：强制更新成就校对文件
- **#成就调试**：显示调试信息（仅限测试环境）
- **#ACM开启api**：开启从网络获取背景图片功能
- **#ACM关闭api**：关闭从网络获取背景图片功能
- **#ACM开启随机**：开启使用随机背景图片功能
- **#ACM关闭随机**：关闭使用随机背景图片功能

## 插件配置

插件配置位于`res/wFile/def/theme-config.yaml`，可以自定义：

- 页面标题、背景颜色和图片
- 成就卡片样式和显示方式
- 动画效果设置


### 数据流

1. 用户通过命令或文件提交成就数据
2. 成就数据经过处理和存储
3. 用户请求生成查漏报告时，插件读取数据并通过模板系统渲染HTML
4. HTML被转换为图片并返回给用户

## 注意事项

1. 为保护隐私，建议在私聊环境下使用成就录入和查询功能
2. 成就数据仅保存在本地，不会上传至任何服务器
3. 定期更新校对文件以确保成就数据的准确性

## 更新日志

### v2.7.9
- 优化代码结构，提高模块化程度
- 移除冗余代码，改进模块间依赖关系
- 统一使用ES模块语法，提高代码质量
- 修复部分功能在特殊环境下的兼容性问题

### v2.7.0
- 支持椰羊成就文件格式
- 新增主题自定义功能
- 优化图片生成性能

### v2.0.0
- 重构核心代码
- 新增多模板支持
- 完善错误处理机制

## 许可证

本插件采用MIT许可证开源。

## 反馈与支持

如有问题或建议，欢迎在项目仓库提交issue或联系开发者。